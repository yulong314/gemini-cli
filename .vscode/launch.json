{
  // VS Code è°ƒè¯•é…ç½® - Gemini CLI
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸš€ Debug Gemini CLI (Main)",
      "program": "${workspaceFolder}/scripts/start.js",
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "GEMINI_SANDBOX": "false",
        "DEBUG": "1"
      },
      "runtimeArgs": ["--enable-source-maps"],
      "autoAttachChildProcesses": true,
      "resolveSourceMapLocations": [
        "${workspaceFolder}/**",
        "!**/node_modules/**"
      ],
      "outFiles": ["${workspaceFolder}/packages/**/dist/**/*.js"],
      "preLaunchTask": "ğŸ”¨ Build All Packages"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸ Debug CLI Direct (Fast)",
      "program": "${workspaceFolder}/packages/cli/dist/index.js",
      "args": [],
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "GEMINI_SANDBOX": "false",
        "DEBUG": "1",
        "GEMINI_CLI_NO_RELAUNCH": "true",
        "CLI_VERSION": "0.1.5",
        "DEV": "true"
      },
      "runtimeArgs": ["--enable-source-maps"],
      "outFiles": ["${workspaceFolder}/packages/**/dist/**/*.js"],
      "preLaunchTask": "ğŸ”¨ Build All Packages"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "Launch E2E",
      "program": "${workspaceFolder}/integration-tests/run-tests.js",
      "args": ["--verbose", "--keep-output", "list_directory"],
      "skipFiles": ["<node_internals>/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "GEMINI_SANDBOX": "false"
      }
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸ”§ Debug Core Package Only",
      "program": "${workspaceFolder}/packages/core/dist/index.js",
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "DEBUG": "1"
      },
      "runtimeArgs": ["--enable-source-maps"],
      "outFiles": ["${workspaceFolder}/packages/**/dist/**/*.js"],
      "preLaunchTask": "ğŸ”§ Build Core Package"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸ§ª Debug Specific Test File",
      "runtimeExecutable": "npm",
      "runtimeArgs": [
        "run",
        "test",
        "-w",
        "packages",
        "--",
        "--inspect-brk=9229",
        "--no-file-parallelism",
        "${input:testFile}"
      ],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "env": {
        "DEBUG": "1"
      }
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸŒ Debug E2E Integration Tests",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "test:e2e", "--", "--verbose"],
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "GEMINI_SANDBOX": "false",
        "DEBUG": "1"
      }
    },
    {
      "type": "node",
      "request": "attach",
      "name": "ğŸ”— Attach to Running Process",
      "port": 9229,
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "localRoot": "${workspaceFolder}/packages",
      "remoteRoot": "/usr/local/share/npm-global/lib/node_modules/@gemini-cli",
      "sourceMaps": true,
      "outFiles": ["${workspaceFolder}/**/*.js"]
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸ” Debug Tool System",
      "program": "${workspaceFolder}/packages/core/dist/tools/tool-registry.js",
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "DEBUG": "1"
      },
      "runtimeArgs": ["--enable-source-maps"],
      "outFiles": ["${workspaceFolder}/packages/**/dist/**/*.js"],
      "preLaunchTask": "ğŸ”§ Build Core Package"
    },
    {
      "type": "node",
      "request": "launch",
      "name": "âš¡ Debug with Custom Args",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "args": ["${input:customArgs}"],
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "GEMINI_SANDBOX": "false",
        "DEBUG": "1",
        "GEMINI_CLI_NO_RELAUNCH": "true",
        "GEMINI_API_KEY": "${input:apiKey}"
      }
    },
    {
      "type": "node",
      "request": "launch",
      "name": "ğŸš« Debug Non-Interactive Mode",
      "program": "${workspaceFolder}/packages/cli/dist/src/nonInteractiveCli.js",
      "args": ["${input:nonInteractiveCommand}"],
      "skipFiles": ["<node_internals>/**", "**/node_modules/**"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "env": {
        "DEBUG": "1",
        "GEMINI_SANDBOX": "false"
      },
      "runtimeArgs": ["--enable-source-maps"],
      "outFiles": ["${workspaceFolder}/packages/**/dist/**/*.js"],
      "preLaunchTask": "ğŸ–¥ï¸ Build CLI Package"
    }
  ],
  "inputs": [
    {
      "id": "testFile",
      "type": "promptString",
      "description": "è¾“å…¥è¦è°ƒè¯•çš„æµ‹è¯•æ–‡ä»¶è·¯å¾„",
      "default": "${workspaceFolder}/packages/cli/src/ui/components/LoadingIndicator.test.tsx"
    },
    {
      "id": "customArgs",
      "type": "promptString",
      "description": "è¾“å…¥è‡ªå®šä¹‰å‘½ä»¤è¡Œå‚æ•°",
      "default": ""
    },
    {
      "id": "apiKey",
      "type": "promptString",
      "description": "è¾“å…¥ Gemini API Key (å¯é€‰)",
      "default": ""
    },
    {
      "id": "nonInteractiveCommand",
      "type": "promptString",
      "description": "è¾“å…¥éäº¤äº’å¼å‘½ä»¤",
      "default": "help"
    }
  ],
  "compounds": [
    {
      "name": "ğŸš€ Debug Full Stack",
      "configurations": ["ğŸš€ Debug Gemini CLI (Main)"],
      "stopAll": true
    }
  ]
}
